<div class="well well-large">
  <form name="search">
    <input type="search" class="form-control" placeholder="Search" ng-model="search.query"/>
  </form>

  <p class="label label-info pull-right" ng-show="search.query">
    <span ng-switch="totalItems">
      <span ng-switch-when="0">No responses match</span>
      <span ng-switch-when="1">One response matches</span>
      <span ng-switch-default>{{totalItems}} responses match</span>
      {{search.query}}
    </span>
  </p>
</div>

<article class="response"
         ng-repeat="response in filteredResponses | skip:(page-1)*itemsPerPage | limitTo:itemsPerPage">

  <ul class="list-inline pull-right">
    <li>
      <a ng-click="destroy(response.id)" class="btn btn-link">Delete</a>
    </li>
  </ul>

  <p class="lead" ng-bind-html="response.questionnaire | highlight:search.query"></p>

  <div ng-controller="answerShowCtrl">
    <p class="lead">
      <strong>Respondent</strong>
      <span ng-bind-html="response.respondent | highlight:search.query"></span>
    </p>

    <button class="btn btn-default" ng-click="isCollapsed = !isCollapsed">
      <span ng-show="isCollapsed">
        <i class="glyphicon glyphicon-plus"></i>
      </span>
      <span ng-hide="isCollapsed">
        <i class="glyphicon glyphicon-minus"></i>
      </span>
      Answers # {{response.answers.length}}
    </button>

    <table class="table table-striped" ng-hide="isCollapsed">
      <thead>
      <tr>
        <th>Question</th>
        <th>Choice</th>
      </tr>
      </thead>
      <tbody>
      <tr ng-repeat="answer in response.answers">
        <td class="col-md-6">{{answer.question}}</td>
        <td class="col-md-6">{{answer.choice}}</td>
      </tr>
      </tbody>
    </table>
  </div>

  <hr/>
</article>

<div class="text-center">
  <pagination total-items="totalItems" page="page" max-size="maxSize"
              items-per-page="itemsPerPage" boundary-links="true" rotate="false"></pagination>
</div>
