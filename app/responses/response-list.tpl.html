<section class="responses">
    <h1>Responses</h1>

    <form name="search">
        <input type="search" class="form-control" placeholder="Search" ng-model="search.query"/>
    </form>

    <p class="label label-info pull-right" ng-show="search.query">
        <span ng-switch on="filteredResponses.length">
            <span ng-switch-when="0">No responses match</span>
            <span ng-switch-when="1">One response matches</span>
            <span ng-switch-default>{{filteredResponses.length}} responses match</span>
            {{search.query}}
        </span>
    </p>

    <article class="response"
             ng-repeat="response in filteredResponses = (responses | filter:isMatch)">

        <p class="lead">{{response.questionnaire}}</p>

        <p><strong>Respondent</strong> {{response.respondent}}</p>

        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Question</th>
                    <th>Choice</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="answer in response.answers">
                    <td class="col-md-6">{{answer.question}}</td>
                    <td class="col-md-6">{{answer.choice}}</td>
                </tr>
            </tbody>
        </table>

        <hr/>
    </article>
</section>
